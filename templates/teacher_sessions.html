{% extends "base.html" %}
{% block title %}My Sessions{% endblock %}

{% block content %}
<div class="container">
    <h2>My Sessions</h2>

    <table class="schedule-grid">
        <thead>
            <tr>
                <th>Hour</th>
                {% for day in days %}
                    <th>{{ day_names[day] }}</th>
                {% endfor %}
            </tr>
        </thead>

        <tbody>
        {% for hour in hours %}
            <tr>
                <td><strong>{{ hour }}</strong></td>

                {% for day in days %}
                    <td>
                        {% if (day, hour) in schedule %}
                            {% set s = schedule[(day, hour)] %}
                            <div class="card">
                                <strong>{{ s.subject }}</strong><br>
                                {{ s.enrolled }}/{{ s.capacity }} students

                                <form method="get"
                                      action="/teacher/view_students/{{ s.id }}">
                                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                                    <button class="small-btn">View Students</button>
                                </form>

                                <form method="post"
                                      action="/teacher/delete_session/{{ s.id }}"
                                      onsubmit="return confirm('Delete this session?');">
                                    <button class="small-btn danger">Delete</button>
                                </form>
                            </div>
                        {% else %}
                            â€”
                        {% endif %}
                    </td>
                {% endfor %}
            </tr>
        {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}