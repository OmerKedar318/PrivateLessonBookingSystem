{% extends "base.html" %}
{% block title %}My Sessions{% endblock %}

{% block content %}
<div class="container">
    <h2>My Sessions</h2>

    <table class="schedule-grid">
        <thead>
            <tr>
                <th>Hour</th>
                {% for day in days %}
                    <th>{{ day_names[day] }}</th>
                {% endfor %}
            </tr>
        </thead>

        <tbody>
        {% for hour in hours %}
            <tr>
                <td><strong>{{ hour }}</strong></td>

                {% for day in days %}
                    <td>
                        {% if (day, hour) in schedule %}
                            {% set s = schedule[(day, hour)] %}
                            <div class="card joined">
                                <strong>{{ s.subject }}</strong><br>
                                Teacher: {{ s.teacher_name }}<br>
                                {{ s.enrolled }}/{{ s.capacity }}

                                <form method="post"
                                      action="/leave_session/{{ s.id }}"
                                      onsubmit="return confirm('Leave this session?');">
                                    <button class="small-btn danger">Leave</button>
                                </form>
                            </div>
                        {% else %}
                            â€”
                        {% endif %}
                    </td>
                {% endfor %}
            </tr>
        {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}